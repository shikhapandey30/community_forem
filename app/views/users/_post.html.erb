<% @posts.each do |post| %>
  <a href = "/posts/<%= post.id %>">
    <div class="clearfix whiteBox borderTop mb10 pb0">
      <div class="clearfix formOuterPost tal padding10-0">
        <div class="col-sm-12 mb10">
          <div class="clearfix userInfo posRel">
            <div class="videoPost">
              <% if current_user == post.user %>
                <div class="editDlt  dropdown">
                  <a href="javascript:void(0)" data-toggle="dropdown"> <img src="../assets/images/arrowDown.png" alt=""></a>
                    <ul class="dropdown-menu">
                      <li><%=link_to 'Edit', edit_post_path(post) %></li>
                      <li> <%= link_to 'Delete', post_path(post), method: :delete, data: { confirm: 'Are you sure?' } %> </li>
                    </ul>
                 </div>
              <% end %>
              
              <div class="font12 bold blackColor"><%=link_to post.try(:title), post %></div>              
              <% if post.upload.try(:image).present? %>
                <a href="<%= post_path(post)%>" class="post"><%= image_tag post.upload.try(:image) %></a>
              <% end %>

             
              <% if post.upload.try(:file).present? %>                
                Attachment: <a href="<%= post.upload.try(:file)%>" class="post" target="_blank"><%=post.upload[:file]%></a>
              <% end %>

              <% if post.upload.try(:site_link).present? %>
                WebSite Link: <a href="<%= post.upload.try(:site_link) %>" class="post" target="_blank"><%= post.upload.try(:site_link) %></a>
              <% end %>
              
            </div>
            <%if post.upload.try(:image).present?%><div class="clearfix borderBtmS"></div><%end%>
            <a href="<%= profile_path(post.user)%>" class="userImg"><img src="<%= post.user.try(:img) %>" alt=""></a>
            <a href="<%= profile_path(post.user)%>" class="userNAme"> <%= post.user.try(:screen_name) %></a> <br>
            <span class="font13"><%= designation(post) %></span>
            <div class="fr grayColor tar"><%= time_ago_in_words(post.created_at).capitalize rescue 0%> ago<br>
              <%if !current_user.eql?(post.user)%>
                <%if user_signed_in? && (!current_user.friendships.collect(&:friend).include? post.user) %>
                  <span class="friendship-button-<%=  post.user.id  %>">
                  <%= link_to (image_tag 'images/add.png'), friendships_path(:friend_id =>post.user.id), :class=>"mt10 fr grayColor tar ", :remote=>true ,:method => :post %>
                  </span>
                <%end%>
              <%end%>

              <% if current_user != post.user %>
                <span id="following-button-span-<%= post.user.id %>" class="user-folowed-<%=post.user.id %>">
                  <%= render :partial=> "users/follow_link", :locals => {:object => post} if user_signed_in?%>
                </span>
              <% end %>
              <!-- <a href="#">Follow</a> -->
            </div>
          </div>
          <div class="uniOuter">
            <div class="mt0 blackColor bold ">
              <p><%= post.title %></p>
              <p>
                <%= post.try(:description).try(:html_safe) %> 
              </p>
              <a href="<%=root_path(id: post.id)%>" class="listen whiteBtn" data-remote="true"><img src="/assets/images/audio38.png" alt=""> Listen this post </a>                    
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
        <%= render 'layouts/shared/comments' , post: post %>
      </div>
    </div>
  </a> 
<%end%>
<!-- <div class="loader-img" style="display:none;">
  <img src="../assets/images/preloader.gif"> Loading....
</div> -->
<script type="text/javascript">
   function comment_body(id) {
    $("#comments_"+id).toggle();
    $("#comment_box_"+id).toggle(500);
    $("html, body").scrollTop($('#comment_box_'+id).offset().top- 200);
  }
  function show_comments(post_id){
    $('#comments_'+post_id).toggle(500);
    $("html, body").scrollTop($('#comment_box_'+id).offset().top- 600);    

  }
</script>
